<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>没用的博客 • Posts by &#34;教程&#34; category</title>
        <link>https://blog.tianjiaji.dedyn.io</link>
        <description>没有一点用处的博客!😎😴😪</description>
        <language>zh-CN</language>
        <pubDate>Sat, 13 Apr 2024 03:29:25 +0800</pubDate>
        <lastBuildDate>Sat, 13 Apr 2024 03:29:25 +0800</lastBuildDate>
        <category>博客</category>
        <category>职业技能大赛</category>
        <category>教程</category>
        <category>题目</category>
        <category>工具</category>
        <category>开源</category>
        <category>生成器</category>
        <category>统计</category>
        <category>github</category>
        <category>Hexo</category>
        <category>主題</category>
        <category>butterfly</category>
        <category>主题</category>
        <category>Aplayer</category>
        <category>highlight</category>
        <category>Bar</category>
        <category>demo</category>
        <category>top_img</category>
        <category>单独考试</category>
        <category>面试题目</category>
        <category>单招面试</category>
        <category>标籤外挂</category>
        <item>
            <guid isPermalink="true">https://blog.tianjiaji.dedyn.io/2024/04/13/DNS/undefined/undefined.html</guid>
            <title>DNS 服务</title>
            <link>https://blog.tianjiaji.dedyn.io/2024/04/13/DNS/undefined/undefined.html</link>
            <category>博客</category>
            <category>职业技能大赛</category>
            <category>教程</category>
            <pubDate>Sat, 13 Apr 2024 03:29:25 +0800</pubDate>
            <description><![CDATA[ &lt;link rel=&#34;stylesheet&#34; class=&#34;aplayer-secondary-style-marker&#34; href=&#34;\assets\css\APlayer.min.css&#34;&gt;&lt;script src=&#34;\assets\js\APlayer.min.js&#34; class=&#34;aplayer-secondary-script-marker&#34;&gt;&lt;/script&gt;&lt;center&gt;&lt;font size=&#34;6&#34;&gt;&lt;b&gt;DNS 服务&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;

&lt;hr&gt;
&lt;h1 id=&#34;题目&#34;&gt;&lt;a href=&#34;#题目&#34; class=&#34;headerlink&#34; title=&#34;题目&#34;&gt;&lt;/a&gt;题目&lt;/h1&gt;&lt;p&gt;1．DNS服务&lt;br&gt;任务描述：创建DNS服务器，实现企业域名访问。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;所有linux主机启用防火墙，防火墙区域为 public，在防火墙中放行对应服务端口。&lt;/li&gt;
&lt;li&gt;利用chrony，配置linux1为其他linux主机提供NTP服务。&lt;/li&gt;
&lt;li&gt;所有 linux主机之间 (包含本主机 )root用户实现密钥ssh认证，禁用密码认证。&lt;/li&gt;
&lt;li&gt;利用bind，配置linux1为主DNS服务器，linux2为备用DNS服务器。为所有linux主机提供冗余DNS正反向解析服务。&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id=&#34;第一小题&#34;&gt;&lt;a href=&#34;#第一小题&#34; class=&#34;headerlink&#34; title=&#34;第一小题&#34;&gt;&lt;/a&gt;第一小题&lt;/h1&gt;&lt;p&gt;题目：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;所有linux主机启用防火墙，防火墙区域为 public，在防火墙中放行对应服务端口。&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;放行相应端口&#34;&gt;&lt;a href=&#34;#放行相应端口&#34; class=&#34;headerlink&#34; title=&#34;放行相应端口&#34;&gt;&lt;/a&gt;放行相应端口&lt;/h2&gt;&lt;p&gt;添加端口&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;firewall-cmd --permanent --zone=public --add-port=53/tcp --add-port=&amp;#123;123,53&amp;#125;/udp&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;注意：开放防火墙的命令需要输入至全部主机!&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;端口详情：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;53&amp;#x2F;UDP：主要用途：DNS查询的默认传输方式。大部分常规的、非递归的、较小的DNS查询（如客户端向DNS服务器查询域名对应的IP地址）通常通过UDP协议进行。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;53&amp;#x2F;TCP：主要用途：区域传输（Zone Transfer，AXFR&amp;#x2F;IXFR）：DNS主服务器与辅助服务器之间同步整个或部分DNS区域数据时，由于数据量可能较大，且必须保证数据完整性，通常采用TCP协议。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Chrony作为NTP（Network Time Protocol）服务软件，与传统的NTP服务一样，使用端口123&amp;#x2F;UDP进行时间同步通信。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;重新加载防火墙配置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;firewall-cmd --reload &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;h1 id=&#34;第二小题&#34;&gt;&lt;a href=&#34;#第二小题&#34; class=&#34;headerlink&#34; title=&#34;第二小题&#34;&gt;&lt;/a&gt;第二小题&lt;/h1&gt;&lt;p&gt;题目：&lt;br&gt;2. 利用chrony，配置linux1为其他linux主机提供NTP服务。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;1-配置-Linux1-chrony-conf文件&#34;&gt;&lt;a href=&#34;#1-配置-Linux1-chrony-conf文件&#34; class=&#34;headerlink&#34; title=&#34;1. 配置 Linux1 chrony.conf文件&#34;&gt;&lt;/a&gt;1. 配置 Linux1 chrony.conf文件&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;打开chrony配置文件进行编辑&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;vim /etc/chrony.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;大约第三行&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;pool 2.rocky.pool.ntp.org iburst&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;#pool 2.rocky.pool.ntp.org iburst&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server 10.10.220.101 iburst&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;大约第28行添加此行 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;allow 10.10.220.0/24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;大约的31行取消注释&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;local stratum 10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;退出保存&lt;/p&gt;
&lt;p&gt;重启chrony服务&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl restart chronyd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;h2 id=&#34;2-配置-剩下主机的-chrony-conf文件&#34;&gt;&lt;a href=&#34;#2-配置-剩下主机的-chrony-conf文件&#34; class=&#34;headerlink&#34; title=&#34;2. 配置 剩下主机的 chrony.conf文件&#34;&gt;&lt;/a&gt;2. 配置 剩下主机的 chrony.conf文件&lt;/h2&gt;&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;注意：以下配置必须输入到剩下的主机中！&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;打开chrony配置文件进行编辑&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;vim /etc/chrony.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;大约第三行&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;pool 2.rocky.pool.ntp.org iburst&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;#pool 2.rocky.pool.ntp.org iburst&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server 10.10.220.101 iburst&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;退出保存&lt;/p&gt;
&lt;p&gt;重启chrony服务&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl restart chronyd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;h1 id=&#34;第三小题&#34;&gt;&lt;a href=&#34;#第三小题&#34; class=&#34;headerlink&#34; title=&#34;第三小题&#34;&gt;&lt;/a&gt;第三小题&lt;/h1&gt;&lt;p&gt;题目：&lt;br&gt;3. 所有 linux主机之间 (包含本主机 )root用户实现密钥ssh认证，禁用密码认证。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;1-生成所有主机的SSH密钥&#34;&gt;&lt;a href=&#34;#1-生成所有主机的SSH密钥&#34; class=&#34;headerlink&#34; title=&#34;1. 生成所有主机的SSH密钥&#34;&gt;&lt;/a&gt;1. 生成所有主机的SSH密钥&lt;/h2&gt;&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;将以下命令输入到所有的主机中！！&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;ssh-keygen&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后一路回车到底&lt;/p&gt;
&lt;h2 id=&#34;2-将所有主机的公钥发送至Linux1&#34;&gt;&lt;a href=&#34;#2-将所有主机的公钥发送至Linux1&#34; class=&#34;headerlink&#34; title=&#34;2. 将所有主机的公钥发送至Linux1&#34;&gt;&lt;/a&gt;2. 将所有主机的公钥发送至Linux1&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux1 ~]# ssh-copy-id 10.10.220.101   # 输入至 Linux1，没错你没看错这台主机也要输入&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# ssh-copy-id 10.10.220.101   # 输入至 Linux2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux3 ~]# ssh-copy-id 10.10.220.101   # 输入至 Linux3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux4 ~]# ssh-copy-id 10.10.220.101   # 输入至 Linux4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后输入yes和密码就可以了&lt;/p&gt;
&lt;h2 id=&#34;3-将-authorized-keys-文件发送至其他主机&#34;&gt;&lt;a href=&#34;#3-将-authorized-keys-文件发送至其他主机&#34; class=&#34;headerlink&#34; title=&#34;3. 将 authorized_keys 文件发送至其他主机&#34;&gt;&lt;/a&gt;3. 将 authorized_keys 文件发送至其他主机&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;for i in &amp;#123;1..4&amp;#125;;do scp /root/.ssh/authorized_keys 10.10.220.$i:/root/.ssh/authorized_keys;done&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;4-关闭密码认证&#34;&gt;&lt;a href=&#34;#4-关闭密码认证&#34; class=&#34;headerlink&#34; title=&#34;4. 关闭密码认证&#34;&gt;&lt;/a&gt;4. 关闭密码认证&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim /etc/ssh/sshd_config&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;找到如下配置，大约在65行左右&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;#PasswordAuthentication yes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;修改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;PasswordAuthentication no&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;退出保存&lt;/p&gt;
&lt;h2 id=&#34;5-重启sshd服务&#34;&gt;&lt;a href=&#34;#5-重启sshd服务&#34; class=&#34;headerlink&#34; title=&#34;5. 重启sshd服务&#34;&gt;&lt;/a&gt;5. 重启sshd服务&lt;/h2&gt;&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;注意：所有主机都要重启sshd服务！&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl restart sshd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;h1 id=&#34;第四小题&#34;&gt;&lt;a href=&#34;#第四小题&#34; class=&#34;headerlink&#34; title=&#34;第四小题&#34;&gt;&lt;/a&gt;第四小题&lt;/h1&gt;&lt;p&gt;题目：&lt;br&gt;4. 利用bind，配置linux1为主DNS服务器，linux2为备用DNS服务器。为所有linux主机提供冗余DNS正反向解析服务。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;主DNS服务器&#34;&gt;&lt;a href=&#34;#主DNS服务器&#34; class=&#34;headerlink&#34; title=&#34;主DNS服务器&#34;&gt;&lt;/a&gt;主DNS服务器&lt;/h2&gt;&lt;h3 id=&#34;1-为-Linux1-安装-bind&#34;&gt;&lt;a href=&#34;#1-为-Linux1-安装-bind&#34; class=&#34;headerlink&#34; title=&#34;1. 为 Linux1 安装 bind&#34;&gt;&lt;/a&gt;1. 为 Linux1 安装 bind&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux1 ~]# yum install bind* -y&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;2-配置-Linux1-的named-conf文件&#34;&gt;&lt;a href=&#34;#2-配置-Linux1-的named-conf文件&#34; class=&#34;headerlink&#34; title=&#34;2. 配置 Linux1 的named.conf文件&#34;&gt;&lt;/a&gt;2. 配置 Linux1 的named.conf文件&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim /etc/named.conf     # DNS主配置文件&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// named.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// server as a caching only nameserver (as a localhost DNS resolver only).&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// See /usr/share/doc/bind*/sample/ for example named configuration files.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;options &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen-on port 53 &amp;#123; 127.0.0.1; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen-on-v6 port 53 &amp;#123; ::1; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        directory       &amp;quot;/var/named&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        dump-file       &amp;quot;/var/named/data/cache_dump.db&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        statistics-file &amp;quot;/var/named/data/named_stats.txt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        memstatistics-file &amp;quot;/var/named/data/named_mem_stats.txt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        secroots-file   &amp;quot;/var/named/data/named.secroots&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        recursing-file  &amp;quot;/var/named/data/named.recursing&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        allow-query     &amp;#123; localhost; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        /* &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If you are building a RECURSIVE (caching) DNS server, you need to enable &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           recursion. &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If your recursive DNS server has a public IP address, you MUST enable access &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           control to limit queries to your legitimate users. Failing to do so will&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           cause your server to become part of large scale DNS amplification &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           attacks. Implementing BCP38 within your network would greatly&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           reduce such attack surface &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        */&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        recursion yes;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;请找到如下配置并修改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// named.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// server as a caching only nameserver (as a localhost DNS resolver only).&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// See /usr/share/doc/bind*/sample/ for example named configuration files.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;options &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen-on port 53 &amp;#123; 10.10.220.101; &amp;#125;;   # Linux1的IP地址&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen-on-v6 port 53 &amp;#123; ::1; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        directory       &amp;quot;/var/named&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        dump-file       &amp;quot;/var/named/data/cache_dump.db&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        statistics-file &amp;quot;/var/named/data/named_stats.txt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        memstatistics-file &amp;quot;/var/named/data/named_mem_stats.txt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        secroots-file   &amp;quot;/var/named/data/named.secroots&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        recursing-file  &amp;quot;/var/named/data/named.recursing&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        allow-query     &amp;#123; any; &amp;#125;;       # 允许任何IP访问&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        allow-transfer  &amp;#123; 10.10.220.102; &amp;#125;; # 允许10.10.220.102的IP访问&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        /* &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If you are building a RECURSIVE (caching) DNS server, you need to enable &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           recursion. &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If your recursive DNS server has a public IP address, you MUST enable access &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           control to limit queries to your legitimate users. Failing to do so will&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           cause your server to become part of large scale DNS amplification &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           attacks. Implementing BCP38 within your network would greatly&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           reduce such attack surface &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        */&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        recursion yes;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;3-配置-Linux1-的-named-rfc1912-zones-区域文件&#34;&gt;&lt;a href=&#34;#3-配置-Linux1-的-named-rfc1912-zones-区域文件&#34; class=&#34;headerlink&#34; title=&#34;3. 配置 Linux1 的 named.rfc1912.zones  区域文件&#34;&gt;&lt;/a&gt;3. 配置 Linux1 的 named.rfc1912.zones  区域文件&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim /etc/named.rfc1912.zones &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;在最后添加如下内容&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;zone &amp;quot;skills.lan&amp;quot; IN &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        type master;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        file &amp;quot;zxpy&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        allow-update &amp;#123; none; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;zone &amp;quot;220.10.10.in-addr.arpa&amp;quot; IN &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        type master;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        file &amp;quot;fxpy&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        allow-update &amp;#123; none; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;退出保存&lt;/p&gt;
&lt;h3 id=&#34;4-配置-Linux1-的正反向解析文件&#34;&gt;&lt;a href=&#34;#4-配置-Linux1-的正反向解析文件&#34; class=&#34;headerlink&#34; title=&#34;4. 配置 Linux1 的正反向解析文件&#34;&gt;&lt;/a&gt;4. 配置 Linux1 的正反向解析文件&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cp -p named.localhost zxpy  # 复制正向解析模板文件 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cp -p named.loopback fxpy   # 复制反向解析模板文件&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;注意：复制文件时，一定要加上参数 -P 否则DNS服务无法读取此配置文件&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;详细：&lt;br&gt;这里cp -p是一个Unix&amp;#x2F;Linux系统中的命令，用于复制文件或目录，其中-p表示保留原有文件的权限属性。这条命令的目的是将反向解析模板文件应用到fxpy目录中，可能是为了配置或使用该模板进行进一步的网络解析操作。&lt;/p&gt;
&lt;h3 id=&#34;5-修改-Linux1-的-zxpy-配置文件&#34;&gt;&lt;a href=&#34;#5-修改-Linux1-的-zxpy-配置文件&#34; class=&#34;headerlink&#34; title=&#34;5. 修改 Linux1 的 zxpy 配置文件&#34;&gt;&lt;/a&gt;5. 修改 Linux1 的 zxpy 配置文件&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim zxpy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$TTL 1D&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;@       IN SOA  @ rname.invalid. (&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        0       ; serial&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1D      ; refresh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1H      ; retry&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1W      ; expire&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        3H )    ; minimum&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        NS      @&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        A       127.0.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        AAAA    ::1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;修改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$TTL 1D&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;@       IN SOA  @ linux1.skills.lan. (      # 此处修改为这台主机的完整域名&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        0       ; serial&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1D      ; refresh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1H      ; retry&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1W      ; expire&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        3H )    ; minimum&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        NS      @&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        A       10.10.220.101&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        AAAA    ::1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;linux1  A       10.10.220.101&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;linux2  A       10.10.220.102&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;linux3  A       10.10.220.103&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;linux4  A       10.10.220.104&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;www     A       10.10.220.101&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;web     A       10.10.220.101&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;tomcat  A       10.10.220.102&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;6-修改-Linux1-的-fxpy-配置文件&#34;&gt;&lt;a href=&#34;#6-修改-Linux1-的-fxpy-配置文件&#34; class=&#34;headerlink&#34; title=&#34;6. 修改 Linux1 的 fxpy 配置文件&#34;&gt;&lt;/a&gt;6. 修改 Linux1 的 fxpy 配置文件&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim fxpy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$TTL 1D&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;@       IN SOA  @ rname.invalid. (&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        0       ; serial&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1D      ; refresh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1H      ; retry&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1W      ; expire&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        3H )    ; minimum&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        NS      @&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        A       127.0.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        AAAA    ::1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        PTR     localhost.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;修改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$TTL 1D&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;@       IN SOA  @ linux1.skills.lan. (  # 此处修改为这台主机的完整域名&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        0       ; serial&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1D      ; refresh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1H      ; retry&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        1W      ; expire&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                                        3H )    ; minimum&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        NS      @&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        A       127.0.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        AAAA    ::1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        PTR     localhost.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;101     PTR     linux1.skills.lan.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;102     PTR     linux2.skills.lan.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;103     PTR     linux3.skills.lan.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;104     PTR     linux4.skills.lan.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;101     PTR     www.skills.lan.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;101     PTR     web.skills.lan.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;102     PTR     tomcat.skills.lan.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;7-启动-Linux1-的-DNS-服务&#34;&gt;&lt;a href=&#34;#7-启动-Linux1-的-DNS-服务&#34; class=&#34;headerlink&#34; title=&#34;7. 启动 Linux1 的 DNS 服务&#34;&gt;&lt;/a&gt;7. 启动 Linux1 的 DNS 服务&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;加入开机自启并立即启动 named 服务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;systemctl enable named --now&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;副DNS服务器&#34;&gt;&lt;a href=&#34;#副DNS服务器&#34; class=&#34;headerlink&#34; title=&#34;副DNS服务器&#34;&gt;&lt;/a&gt;副DNS服务器&lt;/h2&gt;&lt;h3 id=&#34;1-为-Linux2-安装-bind&#34;&gt;&lt;a href=&#34;#1-为-Linux2-安装-bind&#34; class=&#34;headerlink&#34; title=&#34;1. 为 Linux2 安装 bind&#34;&gt;&lt;/a&gt;1. 为 Linux2 安装 bind&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;yum install bind* -y&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;2-配置-Linux2-的-named-conf&#34;&gt;&lt;a href=&#34;#2-配置-Linux2-的-named-conf&#34; class=&#34;headerlink&#34; title=&#34;2. 配置 Linux2 的 named.conf&#34;&gt;&lt;/a&gt;2. 配置 Linux2 的 named.conf&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim /etc/named.conf     # DNS主配置文件&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// named.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// server as a caching only nameserver (as a localhost DNS resolver only).&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// See /usr/share/doc/bind*/sample/ for example named configuration files.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;options &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen-on port 53 &amp;#123; 127.0.0.1; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen-on-v6 port 53 &amp;#123; ::1; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        directory       &amp;quot;/var/named&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        dump-file       &amp;quot;/var/named/data/cache_dump.db&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        statistics-file &amp;quot;/var/named/data/named_stats.txt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        memstatistics-file &amp;quot;/var/named/data/named_mem_stats.txt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        secroots-file   &amp;quot;/var/named/data/named.secroots&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        recursing-file  &amp;quot;/var/named/data/named.recursing&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        allow-query     &amp;#123; localhost; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        /* &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If you are building a RECURSIVE (caching) DNS server, you need to enable &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           recursion. &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If your recursive DNS server has a public IP address, you MUST enable access &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           control to limit queries to your legitimate users. Failing to do so will&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           cause your server to become part of large scale DNS amplification &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           attacks. Implementing BCP38 within your network would greatly&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           reduce such attack surface &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        */&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        recursion yes;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;修改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// named.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// server as a caching only nameserver (as a localhost DNS resolver only).&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;// See /usr/share/doc/bind*/sample/ for example named configuration files.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;options &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen-on port 53 &amp;#123; any; &amp;#125;;     # 此处修改为 any&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen-on-v6 port 53 &amp;#123; ::1; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        directory       &amp;quot;/var/named&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        dump-file       &amp;quot;/var/named/data/cache_dump.db&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        statistics-file &amp;quot;/var/named/data/named_stats.txt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        memstatistics-file &amp;quot;/var/named/data/named_mem_stats.txt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        secroots-file   &amp;quot;/var/named/data/named.secroots&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        recursing-file  &amp;quot;/var/named/data/named.recursing&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        allow-query     &amp;#123; any; &amp;#125;;       # 此处修改为 any&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        /* &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If you are building a RECURSIVE (caching) DNS server, you need to enable &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           recursion. &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         - If your recursive DNS server has a public IP address, you MUST enable access &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           control to limit queries to your legitimate users. Failing to do so will&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           cause your server to become part of large scale DNS amplification &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           attacks. Implementing BCP38 within your network would greatly&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           reduce such attack surface &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        */&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        recursion yes;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;3-配置-Linux2-的-named-rfc1912-zones-区域文件&#34;&gt;&lt;a href=&#34;#3-配置-Linux2-的-named-rfc1912-zones-区域文件&#34; class=&#34;headerlink&#34; title=&#34;3. 配置 Linux2 的 named.rfc1912.zones  区域文件&#34;&gt;&lt;/a&gt;3. 配置 Linux2 的 named.rfc1912.zones  区域文件&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim /etc/named.rfc1912.zones    # DNS区域文件&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;在最后添加如下内容&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;zone &amp;quot;skills.lan&amp;quot; IN &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        type slave;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        file &amp;quot;slaves/zxpy&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        masterfile-format text;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        masters &amp;#123; 10.10.220.101; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;zone &amp;quot;220.10.10.in-addr.arpa&amp;quot; IN &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        type slave;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        file &amp;quot;slaves/fxpy&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        masterfile-format text;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        masters &amp;#123; 10.10.220.101; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;4-启动-Linux2-的-DNS-服务&#34;&gt;&lt;a href=&#34;#4-启动-Linux2-的-DNS-服务&#34; class=&#34;headerlink&#34; title=&#34;4. 启动 Linux2 的 DNS 服务&#34;&gt;&lt;/a&gt;4. 启动 Linux2 的 DNS 服务&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;加入开机自启并立即启动 named 服务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;systemctl enable named --now&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h1 id=&#34;最后一个部分&#34;&gt;&lt;a href=&#34;#最后一个部分&#34; class=&#34;headerlink&#34; title=&#34;最后一个部分&#34;&gt;&lt;/a&gt;最后一个部分&lt;/h1&gt;&lt;h2 id=&#34;测试&#34;&gt;&lt;a href=&#34;#测试&#34; class=&#34;headerlink&#34; title=&#34;测试&#34;&gt;&lt;/a&gt;测试&lt;/h2&gt;&lt;p&gt;先测试主DNS&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux1 ~]# nslookup 10.10.220.103     # 测试反向解析&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;103.220.10.10.in-addr.arpa      name = linux3.skills.lan.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux1 ~]# nslookup linux3.skills.lan # 测试正向解析&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Server:         10.10.220.101&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Address:        10.10.220.101#53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Name:   linux3.skills.lan&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Address: 10.10.220.103&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux1 ~]# &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;再测试副DNS&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# nslookup 10.10.220.103     # 测试反向解析&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;103.220.10.10.in-addr.arpa      name = linux3.skills.lan.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# nslookup linux3.skills.lan # 测试正向解析&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Server:         10.10.220.101&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Address:        10.10.220.101#53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Name:   linux3.skills.lan&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Address: 10.10.220.103&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;如果出现以上输出说明你的主DNS和副DNS的正反向配置文件配置正确&lt;/p&gt;
&lt;h3 id=&#34;问题解决&#34;&gt;&lt;a href=&#34;#问题解决&#34; class=&#34;headerlink&#34; title=&#34;问题解决&#34;&gt;&lt;/a&gt;问题解决&lt;/h3&gt;&lt;p&gt;假如上方输出不正常，请检查你的DNS区域配置文件,是否拼错单词!&lt;/p&gt;
&lt;p&gt;如果主DNS正常副DNS不正常，请检查 Linux2 下面的 slaves 目录 是否存在 zxpy 和 fxpy 文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# ll /var/named/slaves/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;总用量 8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rw-r--r--. 1 named named 536  4月 12 15:39 fxpy&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rw-r--r--. 1 named named 482  4月 12 15:15 zxpy&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;如果不存在请重启 Linux1 和 Linux2 的 DNS 服务,再尝试检查此目录下的文件或者检查防火墙端口是否开放,如果还是不存在请在仔细检查DNS区域配置文件中的域名和IP地址是否填写正确单词是否拼错！！&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;linux1&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux1 ~]# systemctl restart named&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;linux2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# systemctl restart named&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;检查清单：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;请确认你的防火墙端口是否正确开放 53&amp;#x2F;TCP 53&amp;#x2F;UDP&lt;/li&gt;
&lt;li&gt;确认你的主DNS服务器和副DNS服务器的DNS记录是否正确。&lt;/li&gt;
&lt;li&gt;你可以查看相关日志，查看是否报错。&lt;/li&gt;
&lt;li&gt;确认你的主DNS服务器和副DNS服务器的配置文件是否正确，配置文件有：&lt;br&gt;&amp;#x2F;etc&amp;#x2F;named.conf             # DNS主配置文件&lt;br&gt;&amp;#x2F;etc&amp;#x2F;named.rfc1912.zones    # DNS区域配置文件&lt;br&gt;&amp;#x2F;var&amp;#x2F;named&amp;#x2F;zxpy             # DNS正向解析文件&lt;br&gt;&amp;#x2F;var&amp;#x2F;named&amp;#x2F;fxpy             # DNS反向解析文件&lt;br&gt;&amp;#x2F;var&amp;#x2F;named&amp;#x2F;slaves&amp;#x2F;*         # 副DNS服务器从主DNS拉取的文件&lt;/li&gt;
&lt;/ol&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://blog.tianjiaji.dedyn.io/2024/04/12/Tomcat/undefined/undefined.html</guid>
            <title>Tomcat 服务</title>
            <link>https://blog.tianjiaji.dedyn.io/2024/04/12/Tomcat/undefined/undefined.html</link>
            <category>博客</category>
            <category>职业技能大赛</category>
            <category>教程</category>
            <pubDate>Fri, 12 Apr 2024 04:11:11 +0800</pubDate>
            <description><![CDATA[ &lt;link rel=&#34;stylesheet&#34; class=&#34;aplayer-secondary-style-marker&#34; href=&#34;\assets\css\APlayer.min.css&#34;&gt;&lt;script src=&#34;\assets\js\APlayer.min.js&#34; class=&#34;aplayer-secondary-script-marker&#34;&gt;&lt;/script&gt;&lt;center&gt;&lt;font size=&#34;6&#34;&gt;&lt;b&gt;Tomcat 服务&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;

&lt;hr&gt;
&lt;h2 id=&#34;题目&#34;&gt;&lt;a href=&#34;#题目&#34; class=&#34;headerlink&#34; title=&#34;题目&#34;&gt;&lt;/a&gt;题目&lt;/h2&gt;&lt;p&gt;3．tomcat 服务&lt;br&gt;任务描述：采用 Tomcat 搭建动态网站。&lt;/p&gt;
&lt;p&gt;(1)配置 linux2 为 nginx 服务器，默认文档 index.html 的内容为 “HelloNginx”；仅允许使用域名访问，http 访问自动跳转到 https。&lt;br&gt;(2)利用 nginx 反向代理，实现 linux3 和 linux4 的 tomcat 负载均衡，通过 https&amp;#x2F;&amp;#x2F;tomcat.skills.lan 加密访问 Tomcat&lt;br&gt;(3)配置 linux3 和 linux4 为 tomcat 服务器，网站默认首页内容分别为 “tomcatA” 和 “tomcatB”，仅使用域名访问 80 端口的 http 服务。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;教程&#34;&gt;&lt;a href=&#34;#教程&#34; class=&#34;headerlink&#34; title=&#34;教程&#34;&gt;&lt;/a&gt;教程&lt;/h2&gt;&lt;h3 id=&#34;第一步&#34;&gt;&lt;a href=&#34;#第一步&#34; class=&#34;headerlink&#34; title=&#34;第一步&#34;&gt;&lt;/a&gt;第一步&lt;/h3&gt;&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;需要先配置 Tomcat 服务器才能配置 Nginx 服务&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;题目：&lt;br&gt;(3)配置 linux3 和 linux4 为 tomcat 服务器，网站默认首页内容分别为 “tomcatA” 和 “tomcatB”，仅使用域名访问 80 端口的 http 服务。&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&#34;1-安装-Tomcat-服务器&#34;&gt;&lt;a href=&#34;#1-安装-Tomcat-服务器&#34; class=&#34;headerlink&#34; title=&#34;1.安装 Tomcat 服务器&#34;&gt;&lt;/a&gt;1.安装 Tomcat 服务器&lt;/h4&gt;&lt;p&gt;为 linux3 安装 Tomcat 并开放防火墙端口&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux3 ~]# yum install tomcat* -y&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux3 ~]# firewall-cmd --permanent --zone=public --add-port=&amp;#123;80,8080,443&amp;#125;/tcp &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux3 ~]# firewall-cmd --reload                      # 更新防火墙配置&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;为 linux4 安装 Tomcat 并开放防火墙端口&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux4 ~]# yum install tomcat* -y&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux4 ~]# firewall-cmd --permanent --zone=public --add-port=&amp;#123;80,8080,443&amp;#125;/tcp &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux4 ~]# firewall-cmd --reload                       # 更新防火墙配置&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;


&lt;p&gt;端口定义：&lt;br&gt;80      http服务&lt;br&gt;443     https服务 # 虽然好像用不上&lt;br&gt;8080    一般也是http之类的服务&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&#34;配置-Tomcat-先让服务飞起来&#34;&gt;&lt;a href=&#34;#配置-Tomcat-先让服务飞起来&#34; class=&#34;headerlink&#34; title=&#34;配置 Tomcat [先让服务飞起来]&#34;&gt;&lt;/a&gt;配置 Tomcat [先让服务飞起来]&lt;/h4&gt;&lt;hr&gt;
&lt;h5 id=&#34;Linux-3-配置&#34;&gt;&lt;a href=&#34;#Linux-3-配置&#34; class=&#34;headerlink&#34; title=&#34;Linux 3 配置&#34;&gt;&lt;/a&gt;Linux 3 配置&lt;/h5&gt;&lt;p&gt;打开配置文件：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux3 ~]# vim /etc/tomcat/server.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;大约：131行&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Engine name=&amp;quot;Catalina&amp;quot; defaultHost=&amp;quot;localhost&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Engine name=&amp;quot;Catalina&amp;quot; defaultHost=&amp;quot;linux3.skills.lan&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;大约：151行&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Host name=&amp;quot;localhost&amp;quot;  appBase=&amp;quot;webapps&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      unpackWARs=&amp;quot;true&amp;quot; autoDeploy=&amp;quot;true&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Host name=&amp;quot;linux3.skills.lan&amp;quot;  appBase=&amp;quot;webapps&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      unpackWARs=&amp;quot;true&amp;quot; autoDeploy=&amp;quot;true&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;设置开机自启，然后 –now 代表立即启动&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl enable tomcat --now &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;删除站点模板文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;rm -rf  /usr/share/tomcat/webapps/ROOT/*&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;创建index.html，并写入”TomcatA”&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;quot;TomcatA&amp;quot; &amp;gt;  /usr/share/tomcat/webapps/ROOT/index.html&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重启Tomcat服务&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl restart tomcat.service&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;h5 id=&#34;Linux-4-配置&#34;&gt;&lt;a href=&#34;#Linux-4-配置&#34; class=&#34;headerlink&#34; title=&#34;Linux 4 配置&#34;&gt;&lt;/a&gt;Linux 4 配置&lt;/h5&gt;&lt;p&gt;打开配置文件：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux4 ~]# vim /etc/tomcat/server.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;大约：131行&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Engine name=&amp;quot;Catalina&amp;quot; defaultHost=&amp;quot;localhost&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Engine name=&amp;quot;Catalina&amp;quot; defaultHost=&amp;quot;linux4.skills.lan&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;大约：151行&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Host name=&amp;quot;localhost&amp;quot;  appBase=&amp;quot;webapps&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      unpackWARs=&amp;quot;true&amp;quot; autoDeploy=&amp;quot;true&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Host name=&amp;quot;linux4.skills.lan&amp;quot;  appBase=&amp;quot;webapps&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      unpackWARs=&amp;quot;true&amp;quot; autoDeploy=&amp;quot;true&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;设置开机自启，然后立即启动。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl enable tomcat --now &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;删除模板文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;rm -rf  /usr/share/tomcat/webapps/ROOT/*&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;创建index.html，并写入”TomcatB”&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;quot;TomcatB&amp;quot; &amp;gt;  /usr/share/tomcat/webapps/ROOT/index.html&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重启服务&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl restart tomcat.service&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;h4 id=&#34;测试-Tomcat&#34;&gt;&lt;a href=&#34;#测试-Tomcat&#34; class=&#34;headerlink&#34; title=&#34;测试 Tomcat&#34;&gt;&lt;/a&gt;测试 Tomcat&lt;/h4&gt;&lt;p&gt;使用 curl 命令 进行验证，如：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;curl linux3.skills.lan:8080&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;curl linux4.skills.lan:8080&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;效果参考:&lt;br&gt;&lt;a href=&#34;https://imgse.com/i/pFXyRNn&#34;&gt;&lt;img src=&#34;https://s21.ax1x.com/2024/04/11/pFXyRNn.png&#34; alt=&#34;pFXyRNn.png&#34;&gt;&lt;/a&gt;&lt;br&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;提示：若无法连接请检查防火墙是否放行相应端口，以及测试时是否输入端口号！如:8080端口&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&#34;更改端口&#34;&gt;&lt;a href=&#34;#更改端口&#34; class=&#34;headerlink&#34; title=&#34;更改端口&#34;&gt;&lt;/a&gt;更改端口&lt;/h4&gt;&lt;p&gt;因为该服务默认没有使用root用户所以在使用高位端口（0~1024）的时候没有权限，会导致服务没法正常启动。&lt;/p&gt;
&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;注意：两台 Tomcat 服务器都要改&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;改权限：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim /usr/lib/systemd/system/tomcat.service&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;user=tomcat&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;user=root&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;修改端口:&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim /etc/tomcat/server.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;大约在第69行：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Connector port=&amp;quot;8080&amp;quot; protocol=&amp;quot;HTTP/1.1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           connectionTimeout=&amp;quot;20000&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           redirectPort=&amp;quot;8443&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;改为 ↓&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Connector port=&amp;quot;80&amp;quot; protocol=&amp;quot;HTTP/1.1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           connectionTimeout=&amp;quot;20000&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           redirectPort=&amp;quot;443&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl restart tomcat.service&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;再次测试-Tomcat&#34;&gt;&lt;a href=&#34;#再次测试-Tomcat&#34; class=&#34;headerlink&#34; title=&#34;再次测试 Tomcat&#34;&gt;&lt;/a&gt;再次测试 Tomcat&lt;/h4&gt;&lt;p&gt;使用 curl 命令 进行验证，如：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;curl http://linux3.skills.lan&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;效果参考:&lt;br&gt;&lt;a href=&#34;https://imgse.com/i/pFXyRNn&#34;&gt;&lt;img src=&#34;https://s21.ax1x.com/2024/04/11/pFXyRNn.png&#34; alt=&#34;pFXyRNn.png&#34;&gt;&lt;/a&gt;&lt;br&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;提示：若无法连接请检查防火墙是否放行相应端口，以及测试时是否输入端口号！如:80端口&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;第二步&#34;&gt;&lt;a href=&#34;#第二步&#34; class=&#34;headerlink&#34; title=&#34;第二步&#34;&gt;&lt;/a&gt;第二步&lt;/h3&gt;&lt;p&gt;题目：&lt;br&gt;(1)配置 linux2 为 nginx 服务器，默认文档 index.html 的内容为 “hellonginx”；仅允许使用域名访问，http 访问自动跳转到 https。&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&#34;安装-Nginx&#34;&gt;&lt;a href=&#34;#安装-Nginx&#34; class=&#34;headerlink&#34; title=&#34;安装 Nginx&#34;&gt;&lt;/a&gt;安装 Nginx&lt;/h4&gt;&lt;p&gt;安装 Nginx 服务 并开放 Linux2 相应端口&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# yum install nginx* -y&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# firewall-cmd --permanent --zone=public --add-port=&amp;#123;80,443&amp;#125;/tcp &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# firewall-cmd --reload                      # 更新防火墙配置&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;配置-nginx-conf&#34;&gt;&lt;a href=&#34;#配置-nginx-conf&#34; class=&#34;headerlink&#34; title=&#34;配置 nginx.conf&#34;&gt;&lt;/a&gt;配置 nginx.conf&lt;/h4&gt;&lt;p&gt;打开 Nginx 配置文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# vim /etc/nginx/nginx.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;写入配置:&lt;br&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;注意：编辑前请注释多余的配置，以下配置必须写在HTTP模块里.&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;就是：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;http&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    这里面！！！&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 拒绝 80端口 使用 IP 地址访问&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 80 default_server;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name _;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    return 403;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 拒绝 443端口 使用 IP 地址访问&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen 443 default_server;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        server_name _;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate &amp;quot;/etc/ssl/skills.crt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate_key &amp;quot;/etc/ssl/skills.key&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        return 403;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# HTTP 访问自动跳转到 HTTPS&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name linux2.skills.lan;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    return 301 https://$server_name$request_uri;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 配置 linux2.skills.com 的 HTTPS 服务&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen 443 ssl;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        server_name linux2.skills.lan;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate /etc/ssl/skills.crt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate_key /etc/ssl/skills.key;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        root /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;设置开机执行并且立即启动 # 启动服务&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl enable nginx --now&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;提示：你可以使用此命令检查配置文件是否有语法错误&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;nginx -t&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;编写HTML文件输出HelloNginx&#34;&gt;&lt;a href=&#34;#编写HTML文件输出HelloNginx&#34; class=&#34;headerlink&#34; title=&#34;编写HTML文件输出HelloNginx&#34;&gt;&lt;/a&gt;编写HTML文件输出HelloNginx&lt;/h4&gt;&lt;p&gt;先删除自带的模板文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;rm -rf /usr/share/nginx/html/*&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;创建HTML文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;quot;HelloNginx&amp;quot; &amp;gt; /usr/share/nginx/html/index.html&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;重启服务&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl restart nginx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;测试&#34;&gt;&lt;a href=&#34;#测试&#34; class=&#34;headerlink&#34; title=&#34;测试&#34;&gt;&lt;/a&gt;测试&lt;/h4&gt;&lt;p&gt;使用 curl 命令 进行验证，如反复使用此命令：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;curl https://linux2.skills.lan&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;结果参考：&lt;br&gt;&lt;a href=&#34;https://imgse.com/i/pFXRYFJ&#34;&gt;&lt;img src=&#34;https://s21.ax1x.com/2024/04/11/pFXRYFJ.png&#34; alt=&#34;pFXRYFJ.png&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;提示：若无法连接请检查防火墙是否放行相应端口，以及测试时是否输入端口号！如:443端口&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;第三步&#34;&gt;&lt;a href=&#34;#第三步&#34; class=&#34;headerlink&#34; title=&#34;第三步&#34;&gt;&lt;/a&gt;第三步&lt;/h3&gt;&lt;p&gt;题目：&lt;br&gt;(2)利用 nginx 反向代理，实现 linux3 和 linux4 的 tomcat 负载均衡，通过 https&amp;#x2F;&amp;#x2F;tomcat.skills.lan 加密访问 Tomcat&lt;/p&gt;
&lt;h4 id=&#34;配置-nginx-conf-1&#34;&gt;&lt;a href=&#34;#配置-nginx-conf-1&#34; class=&#34;headerlink&#34; title=&#34;配置 nginx.conf&#34;&gt;&lt;/a&gt;配置 nginx.conf&lt;/h4&gt;&lt;p&gt;打开 Nginx 配置文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux2 ~]# vim /etc/nginx/nginx.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;写入配置:&lt;br&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;注意：编辑前请注释多余的配置，以下配置必须写在HTTP模块里.&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;就是：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;http&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    这里面！！！&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;p&gt;添加配置：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# 这个模块定义了一个名为 tomcat 的上游服务器组，用于负载均衡&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;upstream tomcat &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server linux3.skills.lan:80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server linux4.skills.lan:80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 监听443端口的服务器，并将所有请求代理到上面定义的tomcat服务器组&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 443 ssl http2;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name tomcat.skills.lan;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_certificate &amp;quot;/etc/ssl/skills.crt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_certificate_key &amp;quot;/etc/ssl/skills.key&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        proxy_pass http://tomcat;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;全部配置：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# 这个模块定义了一个名为 tomcat 的上游服务器组，用于负载均衡&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;upstream tomcat &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server linux3.skills.lan:80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server linux4.skills.lan:80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 拒绝 80端口 使用 IP 地址访问&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 80 default_server;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name _;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    return 403;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 拒绝 443端口 使用 IP 地址访问&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen 443 default_server;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        server_name _;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate &amp;quot;/etc/ssl/skills.crt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate_key &amp;quot;/etc/ssl/skills.key&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        return 403;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# HTTP 访问自动跳转到 HTTPS&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name linux2.skills.lan;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    return 301 https://$server_name$request_uri;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 监听443端口的服务器，并将所有请求代理到上面定义的tomcat服务器组&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 443 ssl http2;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name tomcat.skills.lan;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_certificate &amp;quot;/etc/ssl/skills.crt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_certificate_key &amp;quot;/etc/ssl/skills.key&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        proxy_pass http://tomcat;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# 配置 linux2.skills.com 的 HTTPS 服务&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen 443 ssl;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        server_name linux2.skills.lan;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate /etc/ssl/skills.crt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate_key /etc/ssl/skills.key;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        root /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;详细解释：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;upstream tomcat: 这个模块定义了一个名为tomcat的服务器组，包含两台服务器linux3.skills.lan和linux4.skills.lan，它们都监听80端口。这通常用于负载均衡。&lt;/li&gt;
&lt;li&gt;server (第一个): 这个服务器块设置了一个默认的监听80端口的服务器。任何没有匹配特定server_name的请求都会被这个服务器捕获，并返回403禁止访问错误。&lt;/li&gt;
&lt;li&gt;server (第二个): 类似于第一个server块，但这个是针对HTTPS请求（监听443端口）。它使用指定的证书和密钥来加密通信，并返回403禁止访问错误。&lt;/li&gt;
&lt;li&gt;server (第三个): 这个服务器块监听80端口，并将所有发送到linux2.skills.lan的HTTP请求重定向到相同的服务器地址，但使用HTTPS协议。&lt;/li&gt;
&lt;li&gt;server (第四个): 这个服务器块设置了一个监听443端口的服务器，用于处理发送到tomcat.skills.lan的HTTPS请求。它配置了SSL证书，并将所有请求代理到上面定义的tomcat服务器组。&lt;/li&gt;
&lt;li&gt;server (第五个): 这个服务器块也监听443端口，并处理发送到linux2.skills.lan的HTTPS请求。它设置了一个根目录&amp;#x2F;usr&amp;#x2F;share&amp;#x2F;nginx&amp;#x2F;html，这是静态文件存放的位置。&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;配置参考：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;127&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# For more information on configuration, see:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#   * Official English Documentation: http://nginx.org/en/docs/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#   * Official Russian Documentation: http://nginx.org/ru/docs/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;user nginx;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;worker_processes auto;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;error_log /var/log/nginx/error.log;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;pid /run/nginx.pid;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;include /usr/share/nginx/modules/*.conf;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;events &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    worker_connections 1024;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;http &amp;#123;      # 注意配置必须写在这个模块的大括号里面！！！！！&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    log_format  main  &amp;#x27;$remote_addr - $remote_user [$time_local] &amp;quot;$request&amp;quot; &amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                      &amp;#x27;$status $body_bytes_sent &amp;quot;$http_referer&amp;quot; &amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                      &amp;#x27;&amp;quot;$http_user_agent&amp;quot; &amp;quot;$http_x_forwarded_for&amp;quot;&amp;#x27;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    access_log  /var/log/nginx/access.log  main;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    sendfile            on;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    tcp_nopush          on;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    tcp_nodelay         on;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    keepalive_timeout   65;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    types_hash_max_size 4096;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    include             /etc/nginx/mime.types;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    default_type        application/octet-stream;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # Load modular configuration files from the /etc/nginx/conf.d directory.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # See http://nginx.org/en/docs/ngx_core_module.html#include&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # for more information.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    include /etc/nginx/conf.d/*.conf;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    upstream tomcat &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         server linux3.skills.lan:80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         server linux4.skills.lan:80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;         &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen       80 default_server;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen       [::]:80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        server_name  _;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	return 403;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen       443 default_server;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen       [::]:443;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	ssl_certificate &amp;quot;/etc/ssl/skills.crt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	ssl_certificate_key &amp;quot;/etc/ssl/skills.key&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        server_name  _;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        return 403;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen       80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen       [::]:80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        server_name  linux2.skills.lan;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        return 301 https://\$server_name\$request_uri;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen 443 ssl;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        server_name linux2.skills.lan;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate /etc/ssl/skills.crt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate_key /etc/ssl/skills.key;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        root /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        listen       443 ssl http2;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        server_name  tomcat.skills.lan;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate &amp;quot;/etc/ssl/skills.crt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ssl_certificate_key &amp;quot;/etc/ssl/skills.key&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            proxy_pass http://tomcat;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        root         /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        # Load configuration files for the default server block.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        include /etc/nginx/default.d/*.conf;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        error_page 404 /404.html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        location = /404.html &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        error_page 500 502 503 504 /50x.html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        location = /50x.html &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# Settings for a TLS enabled server.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#    server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        listen       443 ssl http2;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        listen       [::]:443 ssl http2;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        server_name  _;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        root         /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        ssl_certificate &amp;quot;/etc/ssl/skills.crt&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        ssl_certificate_key &amp;quot;/etc/ssl/skills.key&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#       	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        ssl_session_cache shared:SSL:1m;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        ssl_session_timeout  10m;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        ssl_ciphers PROFILE=SYSTEM;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        ssl_prefer_server_ciphers on;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        # Load configuration files for the default server block.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        include /etc/nginx/default.d/*.conf;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        error_page 404 /404.html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#            location = /40x.html &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        error_page 500 502 503 504 /50x.html;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#            location = /50x.html &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;h4 id=&#34;配置安全策略&#34;&gt;&lt;a href=&#34;#配置安全策略&#34; class=&#34;headerlink&#34; title=&#34;配置安全策略&#34;&gt;&lt;/a&gt;配置安全策略&lt;/h4&gt;&lt;p&gt;这条命令用于配置 SELinux（安全增强型 Linux），允许 Tomcat web 服务器（Tomcat）建立网络连接。默认情况下，SELinux 的策略可能会限制 httpd 进程只能访问与其服务相关的端口。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;setsebool -P httpd_can_network_connect 1             #这条指令可以配置SELinux允许Tomcat网络连接&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;设置开机执行并且立即启动&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl enable nginx --now&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;添加DNS解析&#34;&gt;&lt;a href=&#34;#添加DNS解析&#34; class=&#34;headerlink&#34; title=&#34;添加DNS解析&#34;&gt;&lt;/a&gt;添加DNS解析&lt;/h4&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim /var/named/zxpy &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;加入：&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;tomcat  A       10.10.220.102&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重启DNS服务器&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;systemctl restart named&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;h3 id=&#34;最后一部分&#34;&gt;&lt;a href=&#34;#最后一部分&#34; class=&#34;headerlink&#34; title=&#34;最后一部分&#34;&gt;&lt;/a&gt;最后一部分&lt;/h3&gt;&lt;h4 id=&#34;测试-1&#34;&gt;&lt;a href=&#34;#测试-1&#34; class=&#34;headerlink&#34; title=&#34;测试&#34;&gt;&lt;/a&gt;测试&lt;/h4&gt;&lt;p&gt;使用 curl 命令 进行验证,如：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;curl -i http://linux2.skills.lan    # 测试HTTP重定向到https&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl -i https://10.10.220.102       # 测试IP访问能否被阻止&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl  https://tomcat.skills.lan     # 测试负载均衡是否正常&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl  https://linux2.skills.lan     # 测试 Hello Nginx 能否正常输出&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;结果参考：&lt;br&gt;当使用HTTP访问时应当报301状态码，301 状态码代表 重定向，重定向到https&lt;br&gt;&lt;a href=&#34;https://imgse.com/i/pFjeLX4&#34;&gt;&lt;img src=&#34;https://s21.ax1x.com/2024/04/12/pFjeLX4.png&#34; alt=&#34;pFjeLX4.png&#34;&gt;&lt;/a&gt;&lt;br&gt;用IP地址访问时应当报 403 状态码，403 状态码代表 禁止访问&lt;br&gt;&lt;a href=&#34;https://imgse.com/i/pFjefmj&#34;&gt;&lt;img src=&#34;https://s21.ax1x.com/2024/04/12/pFjefmj.png&#34; alt=&#34;pFjefmj.png&#34;&gt;&lt;/a&gt;&lt;br&gt;反复使用此命令，TomcatA和TomcatB 应当交替出现,这个效果为负载均衡&lt;br&gt;&lt;a href=&#34;https://imgse.com/i/pFX6y26&#34;&gt;&lt;img src=&#34;https://s21.ax1x.com/2024/04/11/pFX6y26.png&#34; alt=&#34;pFX6y26.png&#34;&gt;&lt;/a&gt;&lt;br&gt;使用此命令时应当出现Hello Nginx&lt;br&gt;&lt;a href=&#34;https://imgse.com/i/pFXRYFJ&#34;&gt;&lt;img src=&#34;https://s21.ax1x.com/2024/04/11/pFXRYFJ.png&#34; alt=&#34;pFXRYFJ.png&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;提示：若无法连接请检查防火墙是否放行相应端口，DNS解析配置是否正常，配置完是否重启了DNS服务器,是否更改了SELinux安全策略&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;如果你对 Nginx 的配置文件还是不熟悉推荐你去哔哩哔哩上看&lt;a href=&#34;https://space.bilibili.com/327247876/&#34;&gt;@技术蛋老师&lt;/a&gt;的这个视频：&lt;a href=&#34;https://www.bilibili.com/video/BV1TZ421b7SD/&#34;&gt;Nginx入门必须懂3大功能配置 - Web服务器&amp;#x2F;反向代理&amp;#x2F;负载均衡&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;恭喜你，你已经成功配置了 Nginx 作为反向代理服务器，并成功将 Tomcat 集群部署到服务器上，并成功实现负载均衡！！&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://blog.tianjiaji.dedyn.io/2024/03/03/yum%E6%BA%90%E9%85%8D%E7%BD%AE/undefined/undefined.html</guid>
            <title>yum源配置</title>
            <link>https://blog.tianjiaji.dedyn.io/2024/03/03/yum%E6%BA%90%E9%85%8D%E7%BD%AE/undefined/undefined.html</link>
            <category>博客</category>
            <category>职业技能大赛</category>
            <category>教程</category>
            <pubDate>Sun, 03 Mar 2024 00:29:24 +0800</pubDate>
            <description><![CDATA[ &lt;link rel=&#34;stylesheet&#34; class=&#34;aplayer-secondary-style-marker&#34; href=&#34;\assets\css\APlayer.min.css&#34;&gt;&lt;script src=&#34;\assets\js\APlayer.min.js&#34; class=&#34;aplayer-secondary-script-marker&#34;&gt;&lt;/script&gt;&lt;center&gt;&lt;font size=&#34;6&#34;&gt;&lt;b&gt;yum源配置&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;

&lt;hr&gt;
&lt;p&gt;&lt;font color=&#34;red&#34; size=&#34;5&#34;&gt;&lt;b&gt;注意：本教程仅适用于Rocky Linux 9.2 或更高版本，CentOS或者Rocky Linux 并不适用！！&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;h2 id=&#34;介绍yum&#34;&gt;&lt;a href=&#34;#介绍yum&#34; class=&#34;headerlink&#34; title=&#34;介绍yum&#34;&gt;&lt;/a&gt;介绍yum&lt;/h2&gt;&lt;p style=&#34;text-indent:2em;&#34;&gt;yum是一个在Fedora，RedHat，CentOS等Linux系统中的软件包管理器，它可以自动下载和安装RPM包，并且解决包之间的依赖关系。yum的主要功能是更方便地添加/删除/更新软件包，以及管理大量系统的更新问题。&lt;/p&gt;
&lt;p style=&#34;text-indent:2em;&#34;&gt;yum是一个可以帮你在Linux系统上安装和管理软件的工具，它会自动找到你需要的软件包，并且把它们下载和安装好，还会帮你处理软件之间的关系，比如哪些软件需要一起安装，哪些软件不能同时安装等等。yum可以让你更方便地添加/删除/更新软件，而不用担心软件的兼容性和依赖性。&lt;/p&gt;
&lt;p style=&#34;text-indent:2em;&#34;&gt;配置yum源就是告诉yum从哪里获取软件包的信息，比如软件的名字，版本，大小，下载地址等等。不同的yum源可能有不同的软件选择和更新速度，所以你可以根据你的需要和喜好来选择合适的yum源。配置yum源可以让你更快地下载软件，也可以让你找到更多的软件选项。&lt;/p&gt;

&lt;h2 id=&#34;挂载系统镜像&#34;&gt;&lt;a href=&#34;#挂载系统镜像&#34; class=&#34;headerlink&#34; title=&#34;挂载系统镜像&#34;&gt;&lt;/a&gt;挂载系统镜像&lt;/h2&gt;&lt;h3 id=&#34;配置手动挂载&#34;&gt;&lt;a href=&#34;#配置手动挂载&#34; class=&#34;headerlink&#34; title=&#34;配置手动挂载&#34;&gt;&lt;/a&gt;配置手动挂载&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;mount /dev/cdrom /mnt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;注意!如果你使用的是虚拟机那么系统镜像默认目录为:&amp;#x2F;dev&amp;#x2F;cdrom,如果你比赛的时候使用的是云实训平台那么路径一般为:&amp;#x2F;opt&amp;#x2F;linux.iso. &lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;linux.iso为镜像文件不一定叫这个名字.&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux1 ~]# ll /mnt&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;总用量 26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;drwxr-xr-x. 1 root root 2048  5月 14  2023 AppStream    # ⬅️&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;drwxrwxr-x. 1 root root 2048  5月 14  2023 BaseOS       # ⬅️&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rw-r--r--. 1 root root 5504  5月 12  2023 COMMUNITY-CHARTER&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rw-r--r--. 1 root root 1394  5月 12  2023 Contributors&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;drwxrwxr-x. 1 root root 2048  5月 11  2023 EFI&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rw-r--r--. 1 root root  372  5月 12  2023 EULA&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;drwxrwxr-x. 1 root root 2048  5月 11  2023 images&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;drwxrwxr-x. 1 root root 2048  5月 11  2023 isolinux&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rw-r--r--. 1 root root 2204  4月 27  2023 LICENSE&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rw-r--r--. 1 root root  102  5月 12  2023 media.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rw-r--r--. 1 root root 1750  5月 12  2023 RPM-GPG-KEY-Rocky-9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rw-r--r--. 1 root root 3159  5月 12  2023 RPM-GPG-KEY-Rocky-9-Testing&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;AppStream和BaseOS记住这两个目录,这两个目录就是我们要用的目录。&lt;/p&gt;
&lt;h3 id=&#34;配置自动挂载&#34;&gt;&lt;a href=&#34;#配置自动挂载&#34; class=&#34;headerlink&#34; title=&#34;配置自动挂载&#34;&gt;&lt;/a&gt;配置自动挂载&lt;/h3&gt;&lt;p&gt;配置自动挂载可以避免每次重启系统都要的手动挂载。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim /etc/fstab&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;添加此行:&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;/dev/cdrom              /mnt                    auto    defaults        0 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x2F;dev&amp;#x2F;cdrom     — 这个为镜像路径,如果你使用的是云实训平台注意此路径&lt;br&gt;&amp;#x2F;mnt           — 这个为挂载的目的地&lt;/p&gt;
&lt;p&gt;参考:&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# /etc/fstab&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# Created by anaconda on Fri Feb 16 23:38:40 2024&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# Accessible filesystems, by reference, are maintained under &amp;#x27;/dev/disk/&amp;#x27;.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# After editing this file, run &amp;#x27;systemctl daemon-reload&amp;#x27; to update systemd&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# units generated from this file.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/dev/mapper/rl-root     /                       xfs     defaults        0 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;UUID=14b60409-4949-4789-9aef-d47da05e953a /boot                   xfs     defaults        0 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/dev/mapper/rl-swap     none                    swap    defaults        0 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/dev/cdrom              /mnt                    auto    defaults        0 0     # ⬅️&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;也可以使用此命令进行添加:&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;#x27;/dev/cdrom              /mnt                    auto    defaults        0 0&amp;#x27; &amp;gt;&amp;gt; /etc/fstab&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;警告!在使用此命令时,然后一定要注意使用的是&amp;gt;&amp;gt;,而不是&amp;gt;.&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&amp;gt;&amp;gt;是在最后一行添加&lt;br&gt;&amp;gt; 是覆盖文件里的内容&lt;br&gt;&lt;font color=&#34;red&#34;&gt;一旦输错它会覆盖对应文件里的其他内容，所以请慎重使用。&lt;/font&gt;&lt;/p&gt;
&lt;h2 id=&#34;配置yum源&#34;&gt;&lt;a href=&#34;#配置yum源&#34; class=&#34;headerlink&#34; title=&#34;配置yum源&#34;&gt;&lt;/a&gt;配置yum源&lt;/h2&gt;&lt;h3 id=&#34;进入yum配置文件存放目录&#34;&gt;&lt;a href=&#34;#进入yum配置文件存放目录&#34; class=&#34;headerlink&#34; title=&#34;进入yum配置文件存放目录&#34;&gt;&lt;/a&gt;进入yum配置文件存放目录&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cd /etc/yum.repos.d/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;备份配置文件&#34;&gt;&lt;a href=&#34;#备份配置文件&#34; class=&#34;headerlink&#34; title=&#34;备份配置文件&#34;&gt;&lt;/a&gt;备份配置文件&lt;/h3&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;mkdir bf            # 创建目录&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;mv rocky* bf/       # 将配置文件移动至目录&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;选择一个模板并编辑&#34;&gt;&lt;a href=&#34;#选择一个模板并编辑&#34; class=&#34;headerlink&#34; title=&#34;选择一个模板并编辑&#34;&gt;&lt;/a&gt;选择一个模板并编辑&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cp bf/rocky-devel.repo ./&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim rocky-devel.repo&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;b&gt;rocky-devel.repo源文件&lt;/b&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# rocky-devel.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# devel and no-package-left-behind&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[devel]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;name=Rocky Linux $releasever - Devel WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&amp;amp;repo=devel-$releasever$rltype&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/devel/$basearch/os/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgcheck=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;enabled=0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;countme=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[devel-debug]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;name=Rocky Linux $releasever - Devel Debug WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&amp;amp;repo=devel-$releasever-debug$rltype&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/devel/$basearch/debug/tree/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgcheck=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;enabled=0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;countme=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[devel-source]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;name=Rocky Linux $releasever - Devel Source WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&amp;amp;repo=devel-$releasever-source$rltype&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/devel/source/tree/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgcheck=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;enabled=0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;countme=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;修改为:&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# rocky-devel.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# devel and no-package-left-behind&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[devel]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;name=Rocky Linux $releasever - Devel WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&amp;amp;repo=devel-$releasever$rltype&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;baseurl=file:///mnt/BaseOS&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgcheck=0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;enabled=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;countme=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[devel-debug]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;name=Rocky Linux $releasever - Devel Debug WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&amp;amp;repo=devel-$releasever-debug$rltype&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;baseurl=file:///mnt/AppStream&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgcheck=0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;enabled=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;countme=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;更新索引&#34;&gt;&lt;a href=&#34;#更新索引&#34; class=&#34;headerlink&#34; title=&#34;更新索引&#34;&gt;&lt;/a&gt;更新索引&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;yum makecache&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;输出参考:&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@linux1 ~]# yum makecache&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Rocky Linux 9 - Devel WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED                      1.1 MB/s | 4.1 kB     00:00    &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Rocky Linux 9 - Devel Debug WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED                149 kB/s | 4.5 kB     00:00    &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;元数据缓存已建立。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;如果出现报错,请检查系统镜像是否挂载,配置文件路径填写是否正确,等等。&lt;br&gt;或者可以尝试清理缓存后重试：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;yum clean all               # 清理缓存&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://blog.tianjiaji.dedyn.io/2024/01/21/2024-01-21-Competition-sample-questions-Shell/undefined/undefined.html</guid>
            <title>Shell 脚本 教程</title>
            <link>https://blog.tianjiaji.dedyn.io/2024/01/21/2024-01-21-Competition-sample-questions-Shell/undefined/undefined.html</link>
            <category>博客</category>
            <category>职业技能大赛</category>
            <category>教程</category>
            <pubDate>Sun, 21 Jan 2024 20:00:00 +0800</pubDate>
            <description><![CDATA[ &lt;link rel=&#34;stylesheet&#34; class=&#34;aplayer-secondary-style-marker&#34; href=&#34;\assets\css\APlayer.min.css&#34;&gt;&lt;script src=&#34;\assets\js\APlayer.min.js&#34; class=&#34;aplayer-secondary-script-marker&#34;&gt;&lt;/script&gt;&lt;hr&gt;
&lt;h2 id=&#34;Shell脚本&#34;&gt;&lt;a href=&#34;#Shell脚本&#34; class=&#34;headerlink&#34; title=&#34;Shell脚本&#34;&gt;&lt;/a&gt;Shell脚本&lt;/h2&gt;&lt;hr&gt;
&lt;h2 id=&#34;题目&#34;&gt;&lt;a href=&#34;#题目&#34; class=&#34;headerlink&#34; title=&#34;题目&#34;&gt;&lt;/a&gt;题目&lt;/h2&gt;&lt;p&gt;任务描述：请采用 shell 脚本,实现快速批量的操作。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在 linux4 上编写&amp;#x2F;root&amp;#x2F;createfile.sh的shell脚本，创建20个文件&amp;#x2F;root&amp;#x2F;shell&amp;#x2F;file00至&amp;#x2F;root&amp;#x2F;shell&amp;#x2F;file19，如果文件存在，则删除再创建； 每个文件的内容同文件名， 如file00文件的内容为“file00”。&lt;/li&gt;
&lt;li&gt;用&amp;#x2F;root&amp;#x2F;createfile.sh命令测试。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;教程&#34;&gt;&lt;a href=&#34;#教程&#34; class=&#34;headerlink&#34; title=&#34;教程&#34;&gt;&lt;/a&gt;教程&lt;/h2&gt;&lt;hr&gt;
&lt;h3 id=&#34;第一小题&#34;&gt;&lt;a href=&#34;#第一小题&#34; class=&#34;headerlink&#34; title=&#34;第一小题&#34;&gt;&lt;/a&gt;第一小题&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;在 linux4 上编写&amp;#x2F;root&amp;#x2F;createfile.sh的shell脚本，创建20个文件&amp;#x2F;root&amp;#x2F;shell&amp;#x2F;file00至&amp;#x2F;root&amp;#x2F;shell&amp;#x2F;file19，如果文件存在，则删除再创建； 每个文件的内容同文件名， 如file00文件的内容为“file00”。&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h4 id=&#34;1-创建createfile-sh脚本文件&#34;&gt;&lt;a href=&#34;#1-创建createfile-sh脚本文件&#34; class=&#34;headerlink&#34; title=&#34;1.创建createfile.sh脚本文件&#34;&gt;&lt;/a&gt;1.创建createfile.sh脚本文件&lt;/h4&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vim /root/createfile.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;2-写入脚本代码&#34;&gt;&lt;a href=&#34;#2-写入脚本代码&#34; class=&#34;headerlink&#34; title=&#34;2.写入脚本代码&#34;&gt;&lt;/a&gt;2.写入脚本代码&lt;/h4&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;创建目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;mkdir -p /root/shell&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;创建文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;for i in $(seq -f &amp;quot;%02g&amp;quot; 0 19)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;do&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    file=&amp;quot;/root/shell/file$i&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 如果文件存在，则删除&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    if [ -e $file ]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        rm $file&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    fi&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    # 创建文件并设置内容&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    echo &amp;quot;file$i&amp;quot; &amp;gt; $file&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;done&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;hr&gt;
&lt;h3 id=&#34;第二小题&#34;&gt;&lt;a href=&#34;#第二小题&#34; class=&#34;headerlink&#34; title=&#34;第二小题&#34;&gt;&lt;/a&gt;第二小题&lt;/h3&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;用&amp;#x2F;root&amp;#x2F;createfile.sh命令测试。&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h4 id=&#34;3-运行脚本&#34;&gt;&lt;a href=&#34;#3-运行脚本&#34; class=&#34;headerlink&#34; title=&#34;3.运行脚本&#34;&gt;&lt;/a&gt;3.运行脚本&lt;/h4&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;sh /root/createfile.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;font color=&#34;red&#34;&gt;&lt;b&gt;提示：如果运行失败，请检查该文件是否有可执行权限，如果没有权限就用命令添加可执行权限&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;h4 id=&#34;4-修改权限&#34;&gt;&lt;a href=&#34;#4-修改权限&#34; class=&#34;headerlink&#34; title=&#34;4.修改权限&#34;&gt;&lt;/a&gt;4.修改权限&lt;/h4&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;chmod +x /root/createfile.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;+x &amp;#x3D; 给予该文件可执行权限&lt;/p&gt;
&lt;p&gt;权限编号说明：&lt;/p&gt;
&lt;p&gt;drwxr-xr-x  	root	root	&lt;a href=&#34;http://xxxxxxx.sh/&#34;&gt;XXXXXXX.sh&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;drwx&lt;/th&gt;
&lt;th&gt;r-x&lt;/th&gt;
&lt;th&gt;r-x&lt;/th&gt;
&lt;th&gt;root&lt;/th&gt;
&lt;th&gt;root&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;所属用户&lt;/td&gt;
&lt;td&gt;所属组&lt;/td&gt;
&lt;td&gt;其他用户和组&lt;/td&gt;
&lt;td&gt;所属用户&lt;/td&gt;
&lt;td&gt;所属组&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;td&gt;表示这是目录&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;r&lt;/td&gt;
&lt;td&gt;写&lt;/td&gt;
&lt;td&gt;权限编号 4&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;w&lt;/td&gt;
&lt;td&gt;读&lt;/td&gt;
&lt;td&gt;权限编号 2&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;执行&lt;/td&gt;
&lt;td&gt;权限编号 1&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
 ]]></description>
        </item>
    </channel>
</rss>
